<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D –í–µ–∫—Ç–æ—Ä–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ (–ø–ª–æ—â–∏–Ω–∞ Oxy)</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        .ui-overlay {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }
        
        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
        }
        
        .control-group h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #64b5f6;
            text-align: center;
        }
        
        .vector-input {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .vector-input input {
            width: 60px;
            padding: 5px;
            border: none;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.9);
            text-align: center;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            margin: 2px;
            width: 100%;
        }
        
        .btn-primary {
            background: #2196F3;
            color: white;
        }
        
        .btn-secondary {
            background: #FF9800;
            color: white;
        }
        
        .btn-danger {
            background: #f44336;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .result-display {
            background: rgba(76, 175, 80, 0.2);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #4CAF50;
        }
        
        .canvas-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        #vectorCanvas {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            cursor: grab;
        }
        
        #vectorCanvas:active {
            cursor: grabbing;
        }
    </style>
</head>
<body>
    <div class="ui-overlay">
        <div class="controls">
            <div class="control-group">
                <h3>üî¥ –í–µ–∫—Ç–æ—Ä A</h3>
                <div class="vector-input">
                    <input type="number" id="ax" value="" placeholder="X" step="0.5">
                    <input type="number" id="ay" value="" placeholder="Y" step="0.5">
                </div>
                <button class="btn btn-primary" onclick="updateVector('A')">–û–Ω–æ–≤–∏—Ç–∏ A</button>
            </div>
            
            <div class="control-group">
                <h3>üîµ –í–µ–∫—Ç–æ—Ä B</h3>
                <div class="vector-input">
                    <input type="number" id="bx" value="" placeholder="X" step="0.5">
                    <input type="number" id="by" value="" placeholder="Y" step="0.5">
                </div>
                <button class="btn btn-primary" onclick="updateVector('B')">–û–Ω–æ–≤–∏—Ç–∏ B</button>
            </div>
            
            <div class="control-group">
                <h3>‚ö° –í–µ–∫—Ç–æ—Ä–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó</h3>
                <button class="btn btn-secondary" onclick="performOperation('add')">A + B (–ü–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º)</button>
                <button class="btn btn-secondary" onclick="performOperation('subtract')">A - B (–¢—Ä–∏–∫—É—Ç–Ω–∏–∫)</button>
                <button class="btn btn-secondary" onclick="performOperation('dot')">A ¬∑ B (–°–∫–∞–ª—è—Ä–Ω–∏–π)</button>
                <button class="btn btn-secondary" onclick="performOperation('cross')">A √ó B (–í–µ–∫—Ç–æ—Ä–Ω–∏–π)</button>
                <button class="btn btn-danger" onclick="clearOperations()">–û—á–∏—Å—Ç–∏—Ç–∏</button>
            </div>
            
            <div class="control-group">
                <h3>üéØ –ü—Ä–∏–∫–ª–∞–¥–∏</h3>
                <button class="btn btn-primary" onclick="setExample(1)">A(3,2) B(1,4)</button>
                <button class="btn btn-primary" onclick="setExample(2)">A(-2,3) B(4,-1)</button>
                <button class="btn btn-primary" onclick="setExample(3)">A(5,0) B(0,3)</button>
            </div>
        </div>
        
        <div class="result-display" id="resultDisplay" style="display: none;">
            <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong> <span id="resultText"></span>
        </div>
    </div>

    <div class="canvas-container">
        <canvas id="vectorCanvas" width="800" height="600"></canvas>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
        let vectorA = null;
        let vectorB = null;
        let canvas, ctx;
        let scale = 30;
        let centerX, centerY;
        let isDragging = false;
        let lastMouseX, lastMouseY;
        let panX = 0, panY = 0;
        let currentOperation = null;

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        document.addEventListener('DOMContentLoaded', function() {
            canvas = document.getElementById('vectorCanvas');
            ctx = canvas.getContext('2d');
            centerX = canvas.width / 2;
            centerY = canvas.height / 2;
            
            setupCanvasEvents();
            drawScene();
        });

        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π –¥–ª—è canvas
        function setupCanvasEvents() {
            canvas.addEventListener('mousedown', startDrag);
            canvas.addEventListener('mousemove', drag);
            canvas.addEventListener('mouseup', endDrag);
            canvas.addEventListener('wheel', zoom);
            canvas.addEventListener('contextmenu', e => e.preventDefault());
        }

        function startDrag(e) {
            isDragging = true;
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
        }

        function drag(e) {
            if (!isDragging) return;
            
            const deltaX = e.clientX - lastMouseX;
            const deltaY = e.clientY - lastMouseY;
            
            panX += deltaX;
            panY += deltaY;
            
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
            
            drawScene();
        }

        function endDrag() {
            isDragging = false;
        }

        function zoom(e) {
            e.preventDefault();
            const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;
            scale *= zoomFactor;
            scale = Math.max(10, Math.min(100, scale));
            drawScene();
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤
        function updateVector(vectorName) {
            const inputs = vectorName === 'A' ? 
                { x: 'ax', y: 'ay' } : 
                { x: 'bx', y: 'by' };
            
            const vector = {
                x: parseFloat(document.getElementById(inputs.x).value) || 0,
                y: parseFloat(document.getElementById(inputs.y).value) || 0
            };

            const allInputsFilled = vector.x !== 0 || vector.y !== 0;
            
            if (vectorName === 'A') {
                vectorA = allInputsFilled ? vector : null;
            } else {
                vectorB = allInputsFilled ? vector : null;
            }

            clearOperations();
            drawScene();
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–∫–ª–∞–¥—ñ–≤
        function setExample(example) {
            switch(example) {
                case 1:
                    document.getElementById('ax').value = '3';
                    document.getElementById('ay').value = '2';
                    document.getElementById('bx').value = '1';
                    document.getElementById('by').value = '4';
                    break;
                case 2:
                    document.getElementById('ax').value = '-2';
                    document.getElementById('ay').value = '3';
                    document.getElementById('bx').value = '4';
                    document.getElementById('by').value = '-1';
                    break;
                case 3:
                    document.getElementById('ax').value = '5';
                    document.getElementById('ay').value = '0';
                    document.getElementById('bx').value = '0';
                    document.getElementById('by').value = '3';
                    break;
            }
            updateVector('A');
            updateVector('B');
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π
        function performOperation(operation) {
            if (!vectorA || !vectorB) {
                showResult("–ü–æ–º–∏–ª–∫–∞: –°–ø–æ—á–∞—Ç–∫—É –≤–≤–µ–¥—ñ—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –æ–±–æ—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤!");
                return;
            }

            currentOperation = operation;
            let result;
            let resultText = '';

            switch (operation) {
                case 'add':
                    result = {
                        x: vectorA.x + vectorB.x,
                        y: vectorA.y + vectorB.y
                    };
                    resultText = `A + B = (${result.x.toFixed(2)}, ${result.y.toFixed(2)})`;
                    break;

                case 'subtract':
                    result = {
                        x: vectorA.x - vectorB.x,
                        y: vectorA.y - vectorB.y
                    };
                    resultText = `A - B = (${result.x.toFixed(2)}, ${result.y.toFixed(2)})`;
                    break;

                case 'dot':
                    const dotProduct = vectorA.x * vectorB.x + vectorA.y * vectorB.y;
                    const magnitudeA = Math.sqrt(vectorA.x * vectorA.x + vectorA.y * vectorA.y);
                    const magnitudeB = Math.sqrt(vectorB.x * vectorB.x + vectorB.y * vectorB.y);
                    const angle = Math.acos(dotProduct / (magnitudeA * magnitudeB)) * 180 / Math.PI;
                    resultText = `A ¬∑ B = ${dotProduct.toFixed(2)} (–∫—É—Ç = ${angle.toFixed(1)}¬∞)`;
                    showResult(resultText);
                    drawScene();
                    return;

                case 'cross':
                    const crossProduct = vectorA.x * vectorB.y - vectorA.y * vectorB.x;
                    resultText = `A √ó B = ${crossProduct.toFixed(2)} (–≤ 2D —Ü–µ —Å–∫–∞–ª—è—Ä–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è)`;
                    showResult(resultText);
                    drawScene();
                    return;
            }

            showResult(resultText);
            drawScene();
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π
        function clearOperations() {
            currentOperation = null;
            document.getElementById('resultDisplay').style.display = 'none';
            drawScene();
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
        function showResult(text) {
            const resultDisplay = document.getElementById('resultDisplay');
            const resultText = document.getElementById('resultText');
            
            resultText.textContent = text;
            resultDisplay.style.display = 'block';
            
            setTimeout(() => {
                resultDisplay.style.display = 'none';
            }, 8000);
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è —Å—Ü–µ–Ω–∏
        function drawScene() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –ú–∞–ª—é—î–º–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—É —Å—ñ—Ç–∫—É
            drawGrid();
            
            // –ú–∞–ª—é—î–º–æ –æ—Å—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
            drawAxes();
            
            // –ú–∞–ª—é—î–º–æ –≤–µ–∫—Ç–æ—Ä–∏
            if (vectorA) drawVector(vectorA, '#FF4444', 'A');
            if (vectorB) drawVector(vectorB, '#4444FF', 'B');
            
            // –ú–∞–ª—é—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü—ñ—ó
            if (currentOperation && vectorA && vectorB) {
                drawOperation();
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è —Å—ñ—Ç–∫–∏
        function drawGrid() {
            ctx.strokeStyle = '#E0E0E0';
            ctx.lineWidth = 0.5;
            
            const actualCenterX = centerX + panX;
            const actualCenterY = centerY + panY;
            
            // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ñ –ª—ñ–Ω—ñ—ó
            for (let i = -20; i <= 20; i++) {
                const x = actualCenterX + i * scale;
                if (x >= 0 && x <= canvas.width) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.stroke();
                }
            }
            
            // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ñ –ª—ñ–Ω—ñ—ó
            for (let i = -20; i <= 20; i++) {
                const y = actualCenterY + i * scale;
                if (y >= 0 && y <= canvas.height) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –æ—Å–µ–π
        function drawAxes() {
            const actualCenterX = centerX + panX;
            const actualCenterY = centerY + panY;
            
            ctx.strokeStyle = '#333333';
            ctx.lineWidth = 2;
            
            // –í—ñ—Å—å X
            ctx.beginPath();
            ctx.moveTo(0, actualCenterY);
            ctx.lineTo(canvas.width, actualCenterY);
            ctx.stroke();
            
            // –í—ñ—Å—å Y
            ctx.beginPath();
            ctx.moveTo(actualCenterX, 0);
            ctx.lineTo(actualCenterX, canvas.height);
            ctx.stroke();
            
            // –ü—ñ–¥–ø–∏—Å–∏ –æ—Å–µ–π
            ctx.fillStyle = '#333333';
            ctx.font = '16px Arial';
            ctx.fillText('X', canvas.width - 20, actualCenterY - 10);
            ctx.fillText('Y', actualCenterX + 10, 20);
            ctx.fillText('O', actualCenterX + 5, actualCenterY + 15);
            
            // –ß–∏—Å–ª–æ–≤—ñ –ø–æ–∑–Ω–∞—á–∫–∏
            ctx.font = '12px Arial';
            for (let i = -10; i <= 10; i++) {
                if (i === 0) continue;
                
                const x = actualCenterX + i * scale;
                const y = actualCenterY + i * scale;
                
                if (x >= 0 && x <= canvas.width) {
                    ctx.fillText(i.toString(), x - 5, actualCenterY + 15);
                }
                
                if (y >= 0 && y <= canvas.height) {
                    ctx.fillText((-i).toString(), actualCenterX + 5, y + 5);
                }
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–∞
        function drawVector(vector, color, label) {
            const actualCenterX = centerX + panX;
            const actualCenterY = centerY + panY;
            
            const endX = actualCenterX + vector.x * scale;
            const endY = actualCenterY - vector.y * scale; // –Ü–Ω–≤–µ—Ä—Ç—É—î–º–æ Y –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
            
            // –ú–∞–ª—é—î–º–æ –ª—ñ–Ω—ñ—é –≤–µ–∫—Ç–æ—Ä–∞
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(actualCenterX, actualCenterY);
            ctx.lineTo(endX, endY);
            ctx.stroke();
            
            // –ú–∞–ª—é—î–º–æ —Å—Ç—Ä—ñ–ª–∫—É
            drawArrow(actualCenterX, actualCenterY, endX, endY, color);
            
            // –ü—ñ–¥–ø–∏—Å –≤–µ–∫—Ç–æ—Ä–∞
            ctx.fillStyle = color;
            ctx.font = 'bold 14px Arial';
            ctx.fillText(`${label}(${vector.x.toFixed(1)}, ${vector.y.toFixed(1)})`, 
                        endX + 10, endY - 10);
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è —Å—Ç—Ä—ñ–ª–∫–∏
        function drawArrow(fromX, fromY, toX, toY, color) {
            const angle = Math.atan2(toY - fromY, toX - fromX);
            const arrowLength = 15;
            const arrowAngle = Math.PI / 6;
            
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(
                toX - arrowLength * Math.cos(angle - arrowAngle),
                toY - arrowLength * Math.sin(angle - arrowAngle)
            );
            ctx.lineTo(
                toX - arrowLength * Math.cos(angle + arrowAngle),
                toY - arrowLength * Math.sin(angle + arrowAngle)
            );
            ctx.closePath();
            ctx.fill();
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π
        function drawOperation() {
            const actualCenterX = centerX + panX;
            const actualCenterY = centerY + panY;
            
            switch (currentOperation) {
                case 'add':
                    drawParallelogram();
                    break;
                case 'subtract':
                    drawTriangle();
                    break;
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞
        function drawParallelogram() {
            const actualCenterX = centerX + panX;
            const actualCenterY = centerY + panY;
            
            const endAX = actualCenterX + vectorA.x * scale;
            const endAY = actualCenterY - vectorA.y * scale;
            const endBX = actualCenterX + vectorB.x * scale;
            const endBY = actualCenterY - vectorB.y * scale;
            const resultX = actualCenterX + (vectorA.x + vectorB.x) * scale;
            const resultY = actualCenterY - (vectorA.y + vectorB.y) * scale;
            
            // –î–æ–ø–æ–º—ñ–∂–Ω—ñ –ª—ñ–Ω—ñ—ó (–ø—É–Ω–∫—Ç–∏—Ä–Ω—ñ)
            ctx.strokeStyle = '#FFAA00';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            
            // –õ—ñ–Ω—ñ—è –≤—ñ–¥ –∫—ñ–Ω—Ü—è A –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (–ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ B)
            ctx.beginPath();
            ctx.moveTo(endAX, endAY);
            ctx.lineTo(resultX, resultY);
            ctx.stroke();
            
            // –õ—ñ–Ω—ñ—è –≤—ñ–¥ –∫—ñ–Ω—Ü—è B –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (–ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ A)
            ctx.beginPath();
            ctx.moveTo(endBX, endBY);
            ctx.lineTo(resultX, resultY);
            ctx.stroke();
            
            ctx.setLineDash([]);
            
            // –†–µ–∑—É–ª—å—Ç—É—é—á–∏–π –≤–µ–∫—Ç–æ—Ä
            const result = { x: vectorA.x + vectorB.x, y: vectorA.y + vectorB.y };
            drawVector(result, '#44FF44', 'A+B');
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞
        function drawTriangle() {
            const actualCenterX = centerX + panX;
            const actualCenterY = centerY + panY;
            
            const endAX = actualCenterX + vectorA.x * scale;
            const endAY = actualCenterY - vectorA.y * scale;
            const resultX = actualCenterX + (vectorA.x - vectorB.x) * scale;
            const resultY = actualCenterY - (vectorA.y - vectorB.y) * scale;
            
            // –ú–∞–ª—é—î–º–æ -B –≤—ñ–¥ –∫—ñ–Ω—Ü—è A
            const negB = { x: -vectorB.x, y: -vectorB.y };
            ctx.strokeStyle = '#FF44FF';
            ctx.lineWidth = 2;
            ctx.setLineDash([3, 3]);
            
            ctx.beginPath();
            ctx.moveTo(endAX, endAY);
            ctx.lineTo(resultX, resultY);
            ctx.stroke();
            
            drawArrow(endAX, endAY, resultX, resultY, '#FF44FF');
            
            ctx.setLineDash([]);
            
            // –ü—ñ–¥–ø–∏—Å -B
            ctx.fillStyle = '#FF44FF';
            ctx.font = '12px Arial';
            ctx.fillText('-B', (endAX + resultX) / 2 + 10, (endAY + resultY) / 2);
            
            // –†–µ–∑—É–ª—å—Ç—É—é—á–∏–π –≤–µ–∫—Ç–æ—Ä
            const result = { x: vectorA.x - vectorB.x, y: vectorA.y - vectorB.y };
            drawVector(result, '#44FF44', 'A-B');
        }
    </script>
</body>
</html>